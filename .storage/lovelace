{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace",
  "data": {
    "config": {
      "button_card_templates": {
        "square_cell": {
          "aspect_ratio": "1/1",
          "show_name": false
        },
        "top_row": {
          "template": "square_cell",
          "styles": {
            "card": [
              {
                "border-color": "grey"
              },
              {
                "border-width": "2px"
              }
            ]
          }
        },
        "turn_on": {
          "template": "square_cell",
          "hold_action": {
            "action": "more-info"
          }
        },
        "error": {
          "template": "turn_on",
          "tap_action": "more-info",
          "styles": {
            "card": [
              {
                "background-color": "#9e110d"
              }
            ],
            "icon": [
              {
                "animation": "blink 2s ease infinite"
              },
              {
                "color": "white"
              }
            ]
          }
        },
        "dishwasher_more_info": {
          "template": "square_cell",
          "hold_action": {
            "action": "fire-dom-event",
            "browser_mod": {
              "service": "browser_mod.popup",
              "data": {
                "dismissable": true,
                "content": {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "markdown",
                      "content": "## Dishwasher"
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.dishwasher",
                          "state": "off"
                        }
                      ],
                      "card": {
                        "type": "horizontal-stack",
                        "cards": [
                          {
                            "type": "custom:button-card",
                            "entity": "input_select.dishwasher_status",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.dishwasher_last_run_ended",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.dishwasher_last_run_duration",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "binary_sensor.dishwasher_door",
                            "template": "square_cell",
                            "show_state": true
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.dishwasher",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "vertical-stack",
                        "cards": [
                          {
                            "type": "horizontal-stack",
                            "cards": [
                              {
                                "type": "custom:button-card",
                                "entity": "input_select.dishwasher_status",
                                "template": "square_cell",
                                "show_state": true
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.dishwasher_last_run_started",
                                "template": "square_cell",
                                "show_state": true
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.dishwasher_watts",
                                "template": "square_cell",
                                "show_state": true
                              }
                            ]
                          },
                          {
                            "type": "history-graph",
                            "hours_to_show": 1,
                            "entities": [
                              "sensor.dishwasher_watts"
                            ]
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "input_boolean.dishwasher_load_clean",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"success\">Dishwasher cooled down.  Please open dishwasher.</ha-alert>"
                      }
                    }
                  ]
                },
                "style": "--popup-border-radius: 6px\n"
              }
            }
          }
        },
        "rice_cooker_more_info": {
          "template": "square_cell",
          "hold_action": {
            "action": "fire-dom-event",
            "browser_mod": {
              "service": "browser_mod.popup",
              "data": {
                "dismissable": true,
                "content": {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "markdown",
                      "content": "## Rice Cooker"
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.rice_cooker",
                          "state": "off"
                        }
                      ],
                      "card": {
                        "type": "horizontal-stack",
                        "cards": [
                          {
                            "type": "custom:button-card",
                            "entity": "input_select.rice_cooker_status",
                            "template": "square_cell",
                            "show_state": true,
                            "tap_action": {
                              "action": "call-service",
                              "service": "switch.turn_on",
                              "service_data": {
                                "entity_id": "switch.rice_cooker"
                              }
                            }
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.rice_cooker_last_run_ended",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.rice_cooker_last_run_duration",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "binary_sensor.rice_cooker_lid",
                            "template": "square_cell",
                            "show_state": true,
                            "state_display": "[[[\n  if (states['binary_sensor.rice_cooker_lid'].state == \"off\") \n    return \"Closed\"; \n  else if (states['binary_sensor.rice_cooker_lid'].state == \"on\") \n    return \"Open\"; \n  else \n    return states['binary_sensor.rice_cooker_lid'].state;\n]]]\n"
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.rice_cooker",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "vertical-stack",
                        "cards": [
                          {
                            "type": "horizontal-stack",
                            "cards": [
                              {
                                "type": "custom:button-card",
                                "entity": "input_select.rice_cooker_status",
                                "template": "square_cell",
                                "show_state": true
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.rice_cooker_last_run_started",
                                "template": "square_cell",
                                "show_state": true
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.rice_cooker_watts",
                                "template": "square_cell",
                                "show_state": true
                              }
                            ]
                          },
                          {
                            "type": "history-graph",
                            "hours_to_show": 1,
                            "entities": [
                              "sensor.rice_cooker_watts"
                            ]
                          }
                        ]
                      }
                    }
                  ]
                },
                "style": "--popup-border-radius: 6px\n"
              }
            }
          }
        },
        "stove_more_info": {
          "template": "square_cell",
          "hold_action": {
            "action": "fire-dom-event",
            "browser_mod": {
              "service": "browser_mod.popup",
              "data": {
                "dismissable": true,
                "content": {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "markdown",
                      "content": "## Stove"
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "switch.stove_main_power",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "vertical-stack",
                        "cards": [
                          {
                            "type": "grid",
                            "columns": 4,
                            "square": false,
                            "cards": [
                              {
                                "type": "custom:button-card",
                                "entity": "switch.stove_main_power",
                                "show_name": false,
                                "icon": "mdi:power",
                                "state_display": "[[[ return entity.state.charAt(0).toUpperCase() + entity.state.slice(1) ]]]"
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "input_boolean.stove_select_left_burner",
                                "show_name": false
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "input_boolean.stove_select_right_burner",
                                "show_name": false
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "switch.stove_pause",
                                "show_name": false
                              }
                            ]
                          },
                          {
                            "type": "entities",
                            "entities": [
                              {
                                "entity": "input_number.stove_current_burner_power_slider",
                                "name": "Heat"
                              },
                              {
                                "entity": "number.stove_current_burner_timer",
                                "name": "Timer (min)"
                              }
                            ]
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "switch.stove_main_power",
                          "state": "off"
                        }
                      ],
                      "card": {
                        "type": "horizontal-stack",
                        "cards": [
                          {
                            "type": "custom:button-card",
                            "entity": "switch.stove_main_power",
                            "template": "square_cell",
                            "show_state": true,
                            "state_display": "[[[ return entity.state.charAt(0).toUpperCase() + entity.state.slice(1) ]]]"
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.stove_last_use",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.stove_total_time_used",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.stove_total_power_consumed",
                            "template": "square_cell",
                            "show_state": true
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "select.stove_error_code",
                          "state_not": "None"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"error\">{{ states(\"select.stove_error_code\") }}</ha-alert>"
                      }
                    }
                  ]
                },
                "style": "--popup-border-radius: 6px\n"
              }
            }
          }
        },
        "vacuum_more_info": {
          "template": "top_row",
          "hold_action": {
            "action": "fire-dom-event",
            "browser_mod": {
              "service": "browser_mod.popup",
              "data": {
                "dismissable": true,
                "content": {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "markdown",
                      "content": "## Vacuum"
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "entity": "vacuum.pikachu",
                          "show_name": false,
                          "show_state": true,
                          "state_display": "[[[ return entity.state.charAt(0).toUpperCase() + entity.state.slice(1) ]]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.pikachu_battery",
                          "show_name": false,
                          "show_state": true
                        }
                      ]
                    },
                    {
                      "type": "custom:state-switch",
                      "entity": "{% if states('vacuum.pikachu') in ['cleaning', 'paused', 'returning'] %} cleaning {% elif states('vacuum.pikachu') in ['docked', 'idle'] %} not_cleaning {% else %} error {% endif %}",
                      "default": "error",
                      "states": {
                        "cleaning": {
                          "type": "grid",
                          "columns": 4,
                          "cards": [
                            {
                              "type": "custom:button-card",
                              "entity": "sensor.vacuum_last_run_started",
                              "template": "square_cell",
                              "show_state": true
                            },
                            {
                              "type": "custom:state-switch",
                              "entity": "vacuum.pikachu",
                              "default": "cleaning",
                              "states": {
                                "paused": {
                                  "type": "custom:button-card",
                                  "icon": "mdi:play",
                                  "template": "square_cell",
                                  "tap_action": {
                                    "action": "call-service",
                                    "service": "vacuum.start",
                                    "service_data": {
                                      "entity_id": "vacuum.pikachu"
                                    }
                                  }
                                },
                                "cleaning": {
                                  "type": "custom:button-card",
                                  "icon": "mdi:pause",
                                  "template": "square_cell",
                                  "tap_action": {
                                    "action": "call-service",
                                    "service": "vacuum.pause",
                                    "service_data": {
                                      "entity_id": "vacuum.pikachu"
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "custom:button-card",
                              "icon": "mdi:stop",
                              "template": "square_cell",
                              "tap_action": {
                                "action": "call-service",
                                "service": "vacuum.stop",
                                "service_data": {
                                  "entity_id": "vacuum.pikachu"
                                }
                              }
                            },
                            {
                              "type": "custom:button-card",
                              "icon": "mdi:home-import-outline",
                              "template": "square_cell",
                              "tap_action": {
                                "action": "call-service",
                                "service": "vacuum.return_to_base",
                                "service_data": {
                                  "entity_id": "vacuum.pikachu"
                                }
                              }
                            }
                          ]
                        },
                        "not_cleaning": {
                          "type": "grid",
                          "columns": 5,
                          "cards": [
                            {
                              "type": "custom:button-card",
                              "entity": "sensor.vacuum_last_run_ended",
                              "show_state": true,
                              "template": "square_cell"
                            },
                            {
                              "type": "custom:button-card",
                              "entity": "sensor.vacuum_clean_time",
                              "template": "square_cell",
                              "show_state": true
                            },
                            {
                              "type": "custom:button-card",
                              "icon": "mdi:tape-measure",
                              "template": "square_cell",
                              "label": "[[[ return Math.round(states['vacuum.pikachu'].attributes.clean_area) + 'sqm' ]]]",
                              "show_label": true
                            },
                            {
                              "type": "custom:button-card",
                              "entity": "camera.pikachu_cleaning_map",
                              "template": "square_cell"
                            },
                            {
                              "type": "custom:button-card",
                              "icon": "mdi:play",
                              "template": "square_cell",
                              "tap_action": {
                                "action": "call-service",
                                "service": "vacuum.start",
                                "service_data": {
                                  "entity_id": "vacuum.pikachu"
                                }
                              }
                            }
                          ]
                        },
                        "error": {
                          "type": "grid",
                          "columns": 4,
                          "cards": [
                            {
                              "type": "custom:button-card",
                              "color_type": "blank-card"
                            },
                            {
                              "type": "custom:button-card",
                              "entity": "sensor.vacuum_last_run_started",
                              "template": "square_cell",
                              "show_state": true
                            },
                            {
                              "type": "custom:button-card",
                              "entity": "sensor.vacuum_clean_time",
                              "template": "square_cell",
                              "show_state": true
                            },
                            {
                              "type": "custom:button-card",
                              "color_type": "blank-card"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "automation.notify_when_vacuum_running_with_doors_open",
                          "name": "Warn if vacuum may get wet"
                        }
                      ]
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "vacuum.pikachu",
                          "state": "idle"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"error\">Vacuum not docked properly</ha-alert>"
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.vacuum_running_with_doors_open",
                          "state": "on"
                        },
                        {
                          "entity": "automation.notify_when_vacuum_running_with_doors_open",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"error\">Please close bathroom doors. Otherwise, vacuum will pause at  {{ ((now() + timedelta(minutes = 1)).time() | string)[:5] }}.</ha-alert>"
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.vacuum_running_with_doors_open",
                          "state": "on"
                        },
                        {
                          "entity": "automation.notify_when_vacuum_running_with_doors_open",
                          "state": "off"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"error\">Vacuum may get wet as it is running with bathroom doors open.</ha-alert>"
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "vacuum.pikachu",
                          "state": "error"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"error\">{{ state_attr('vacuum.pikachu', 'status') }}</ha-alert>"
                      }
                    }
                  ]
                },
                "style": "--popup-border-radius: 6px\n"
              }
            }
          }
        },
        "washer_more_info": {
          "template": "square_cell",
          "tap_action": {
            "action": "fire-dom-event",
            "browser_mod": {
              "service": "browser_mod.popup",
              "data": {
                "dismissable": true,
                "content": {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "markdown",
                      "content": "## Washer"
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "sensor.washer_status",
                          "state_not": "Off"
                        }
                      ],
                      "card": {
                        "type": "vertical-stack",
                        "cards": [
                          {
                            "type": "grid",
                            "columns": 3,
                            "square": true,
                            "cards": [
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.washer_current_course",
                                "template": "square_cell",
                                "show_state": true
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.washer_run_state",
                                "template": "square_cell",
                                "show_state": true
                              },
                              {
                                "type": "custom:button-card",
                                "entity": "sensor.washer_countdown",
                                "template": "square_cell",
                                "show_state": true
                              }
                            ]
                          },
                          {
                            "type": "entities",
                            "entities": [
                              "sensor.washer_spin_speed",
                              "sensor.washer_water_temp",
                              "binary_sensor.washer_door_lock",
                              "binary_sensor.washer_child_lock"
                            ]
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "sensor.washer_status",
                          "state": "Off"
                        }
                      ],
                      "card": {
                        "type": "horizontal-stack",
                        "cards": [
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.washer_status",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "sensor.washer_last_wash_completed",
                            "template": "square_cell",
                            "show_state": true
                          },
                          {
                            "type": "custom:button-card",
                            "entity": "binary_sensor.washer_door",
                            "template": "square_cell",
                            "show_state": true,
                            "state_display": "[[[\n  if (states['binary_sensor.washer_door'].state == \"off\") \n    return \"Closed\"; \n  else if (states['binary_sensor.washer_door'].state == \"on\") \n    return \"Open\"; \n  else \n    return states['binary_sensor.washer_door'].state;\n]]]\n"
                          }
                        ]
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.washer_error_state",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"error\">{{ state_attr(\"sensor.washer\", \"error_message\") }}</ha-alert>"
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "input_boolean.washer_load_clean",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"success\">Wash completed.  Please unload laundry.</ha-alert>"
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.washer_tub_dirty",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "markdown",
                        "content": "<ha-alert alert-type=\"info\">{{ states('sensor.washer_tub_clean_counter') }} loads since last tub cleaning</ha-alert>"
                      }
                    }
                  ]
                },
                "style": "--popup-border-radius: 6px\n"
              }
            }
          }
        },
        "zigbee_endpoint": {
          "template": "square_cell",
          "state": [
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.zigbee_lqi_threshold_poor'].state) ]]]",
              "color": "#9e110d"
            },
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.zigbee_lqi_threshold_moderate'].state) ]]]",
              "color": "#f2900f"
            },
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.zigbee_lqi_threshold_good'].state) ]]]",
              "color": "#b4fab4"
            },
            {
              "operator": "default",
              "color": "grey"
            }
          ]
        },
        "zigbee_router": {
          "template": "zigbee_endpoint",
          "styles": {
            "card": [
              {
                "border-color": "grey"
              },
              {
                "border-width": "0.5px"
              }
            ]
          }
        },
        "sensor_diag": {
          "template": "square_cell",
          "color_type": "card",
          "show_icon": false,
          "tap_action": {
            "action": "more-info"
          }
        },
        "sensor_binary": {
          "template": "sensor_diag",
          "state": [
            {
              "value": "on",
              "color": "#b4fab4"
            },
            {
              "value": "off",
              "color": "#9e110d"
            },
            {
              "operator": "default",
              "color": "grey"
            }
          ]
        },
        "sensor_motion": {
          "template": "sensor_binary",
          "label": "[[[ return parseInt((Date.now() - Date.parse(entity.last_updated)) / 60000) ]]]",
          "show_label": true
        },
        "sensor_temperature": {
          "template": "sensor_diag",
          "label": "[[[ return parseInt(entity.state) ]]]",
          "show_label": true,
          "state": [
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.temperature_threshold_cold'].state) ]]]",
              "color": "#b4fab4"
            },
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.temperature_threshold_warm'].state) ]]]",
              "color": "#f2900f"
            },
            {
              "operator": ">",
              "value": "[[[ return parseInt(states['input_number.temperature_threshold_warm'].state) ]]]",
              "color": "#9e110d"
            },
            {
              "operator": "default",
              "color": "grey"
            }
          ]
        },
        "sensor_humidity": {
          "template": "sensor_diag",
          "label": "[[[ return parseInt(entity.state) ]]]",
          "show_label": true,
          "state": [
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.humidity_threshold_low'].state) ]]]",
              "color": "#b4fab4"
            },
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.humidity_threshold_high'].state) ]]]",
              "color": "#f2900f"
            },
            {
              "operator": ">",
              "value": "[[[ return parseInt(states['input_number.humidity_threshold_high'].state) ]]]",
              "color": "#9e110d"
            },
            {
              "operator": "default",
              "color": "grey"
            }
          ]
        },
        "sensor_lux": {
          "template": "sensor_diag",
          "label": "[[[ return parseInt(entity.state) ]]]",
          "show_label": true,
          "state": [
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.minimum_lux'].state) ]]]",
              "color": "#9e110d"
            },
            {
              "operator": "<=",
              "value": "[[[ return parseInt(states['input_number.comfortable_lux'].state) ]]]",
              "color": "#f2900f"
            },
            {
              "operator": ">",
              "value": "[[[ return parseInt(states['input_number.comfortable_lux'].state) ]]]",
              "color": "#b4fab4"
            },
            {
              "operator": "default",
              "color": "grey"
            }
          ]
        }
      },
      "views": [
        {
          "theme": "no_border",
          "title": "Home",
          "icon": "mdi:home-assistant",
          "badges": [],
          "cards": [
            {
              "type": "grid",
              "columns": 6,
              "cards": [
                {
                  "type": "custom:button-card",
                  "entity": "sensor.local_two_hour_forecast",
                  "template": "top_row",
                  "icon": "[[[\n  if (entity.state.includes('Fair'))\n    if (states['sun.sun'].state == 'above_horizon')\n      return \"mdi:weather-sunny\";\n    else\n      return \"mdi:weather-night\";\n  else if (entity.state == 'Partly Cloudy')\n    if (states['sun.sun'].state == 'above_horizon')\n      return \"mdi:weather-partly-cloudy\";\n    else\n      return \"mdi:weather-night-partly-cloudy\";\n  else if (entity.state == 'Cloudy')\n    return \"mdi:weather-cloudy\";\n  else if (entity.state.includes('Thunder'))\n    return \"mdi:weather-lightning-rainy\";\n  else if (entity.state.includes('Shower'))\n    return \"mdi:weather-pouring\";\n  else if (entity.state.includes('Rain'))\n    return \"mdi:weather-rainy\";\n  else if (entity.state.includes('Wind'))\n    return \"mdi:weather-windy\";\n  else\n    return \"mdi:weather-cloudy-alert\"\n]]]\n",
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['sensor.raining_with_windows_open'].state == 'alert')\n    return '#9e110d';\n  else if (states['sensor.raining_with_windows_open'].state == 'warning')\n    return '#f2900f';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Local Weather"
                            },
                            {
                              "type": "custom:button-card",
                              "entity": "sensor.local_two_hour_forecast",
                              "show_name": false,
                              "show_state": true,
                              "icon": "[[[\n  if (entity.state.includes('Fair'))\n    if (states['sun.sun'].state == 'above_horizon')\n      return \"mdi:weather-sunny\";\n    else\n      return \"mdi:weather-night\";\n  else if (entity.state == 'Partly Cloudy')\n    if (states['sun.sun'].state == 'above_horizon')\n      return \"mdi:weather-partly-cloudy\";\n    else\n      return \"mdi:weather-night-partly-cloudy\";\n  else if (entity.state == 'Cloudy')\n    return \"mdi:weather-cloudy\";\n  else if (entity.state.includes('Thunder'))\n    return \"mdi:weather-lightning-rainy\";\n  else if (entity.state.includes('Shower'))\n    return \"mdi:weather-pouring\";\n  else if (entity.state.includes('Rain'))\n    return \"mdi:weather-rainy\";\n  else if (entity.state.includes('Wind'))\n    return \"mdi:weather-windy\";\n  else\n    return \"mdi:weather-cloudy-alert\"\n]]]\n"
                            },
                            {
                              "type": "grid",
                              "columns": 5,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.local_rainfall",
                                  "icon": "mdi:weather-pouring",
                                  "show_state": true,
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.local_outdoor_temperature",
                                  "icon": "mdi:sun-thermometer",
                                  "show_state": true,
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.local_outdoor_humidity",
                                  "icon": "mdi:water-percent",
                                  "show_state": true,
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.sun_solar_elevation",
                                  "show_state": true,
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.sun_solar_azimuth",
                                  "show_state": true,
                                  "template": "square_cell"
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.raining_with_windows_open",
                                  "state": "alert"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Heavy rain with windows open</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.raining_with_windows_open",
                                  "state": "warning"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"warning\">Raining with windows open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "media_player.all_speakers",
                  "default": "in_use",
                  "states": {
                    "unavailable": {
                      "type": "custom:button-card",
                      "entity": "media_player.all_speakers",
                      "template": "error"
                    },
                    "unknown": {
                      "type": "custom:button-card",
                      "icon": "mdi:music-off",
                      "template": "top_row"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "media_player.all_speakers",
                      "template": "top_row"
                    },
                    "in_use": {
                      "type": "custom:state-switch",
                      "entity": "{% if states('media_player.study_room_speaker') in ['playing','buffering','idle','paused'] and states('media_player.kitchen_speaker') not in ['playing','buffering','idle','paused'] %} study_room_speaker {% elif states('media_player.kitchen_speaker') in ['playing','buffering','idle','paused'] and states('media_player.study_room_speaker') not in ['playing','buffering','idle','paused'] %} kitchen_speaker {% else %} both {% endif %}",
                      "default": "both",
                      "states": {
                        "study_room_speaker": {
                          "type": "custom:slider-button-card",
                          "entity": "media_player.study_room_speaker",
                          "icon": {
                            "show": true,
                            "use_state_color": true,
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.media_play_pause",
                              "service_data": {
                                "entity_id": "media_player.study_room_speaker"
                              }
                            }
                          },
                          "slider": {
                            "direction": "bottom-top",
                            "background": "solid",
                            "use_state_color": false,
                            "use_percentage_bg_opacity": false,
                            "show_track": false,
                            "toggle_on_click": false,
                            "force_square": true
                          },
                          "show_name": false,
                          "show_state": false,
                          "compact": true,
                          "action_button": {
                            "mode": "toggle",
                            "icon": "mdi:power",
                            "show": false,
                            "show_spinner": true,
                            "tap_action": {
                              "action": "toggle"
                            }
                          }
                        },
                        "kitchen_speaker": {
                          "type": "custom:slider-button-card",
                          "entity": "media_player.kitchen_speaker",
                          "icon": {
                            "show": true,
                            "use_state_color": true,
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.media_play_pause",
                              "service_data": {
                                "entity_id": "media_player.kitchen_speaker"
                              }
                            }
                          },
                          "slider": {
                            "direction": "bottom-top",
                            "background": "solid",
                            "use_state_color": false,
                            "use_percentage_bg_opacity": false,
                            "show_track": false,
                            "toggle_on_click": false,
                            "force_square": true
                          },
                          "show_name": false,
                          "show_state": false,
                          "compact": true,
                          "action_button": {
                            "mode": "toggle",
                            "icon": "mdi:power",
                            "show": false,
                            "show_spinner": true,
                            "tap_action": {
                              "action": "toggle"
                            }
                          }
                        },
                        "both": {
                          "type": "custom:slider-button-card",
                          "entity": "media_player.all_speakers",
                          "icon": {
                            "show": true,
                            "use_state_color": true,
                            "tap_action": {
                              "action": "call-service",
                              "service": "media_player.media_play_pause",
                              "service_data": {
                                "entity_id": "media_player.all_speakers"
                              }
                            }
                          },
                          "slider": {
                            "direction": "bottom-top",
                            "background": "solid",
                            "use_state_color": false,
                            "use_percentage_bg_opacity": false,
                            "show_track": false,
                            "toggle_on_click": false,
                            "force_square": true
                          },
                          "show_name": false,
                          "show_state": false,
                          "compact": true,
                          "action_button": {
                            "mode": "toggle",
                            "icon": "mdi:power",
                            "show": false,
                            "show_spinner": true,
                            "tap_action": {
                              "action": "toggle"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "vacuum.pikachu",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "vacuum.pikachu",
                      "template": "vacuum_more_info",
                      "icon": "mdi:robot-vacuum-variant-alert",
                      "styles": {
                        "card": [
                          {
                            "background-color": "#9e110d"
                          }
                        ],
                        "icon": [
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    "docked": {
                      "type": "custom:button-card",
                      "entity": "vacuum.pikachu",
                      "template": "vacuum_more_info",
                      "label": "[[[ \n  if (parseInt(states['vacuum.pikachu'].attributes.battery_level) <= 95)\n    return states['vacuum.pikachu'].attributes.battery_level + '%';\n  else\n    return ''\n]]]\n",
                      "show_label": true,
                      "color": "rgb(68,115,158)",
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "vacuum.start",
                        "service_data": {
                          "entity_id": "vacuum.pikachu"
                        }
                      }
                    },
                    "cleaning": {
                      "type": "custom:button-card",
                      "entity": "vacuum.pikachu",
                      "template": "vacuum_more_info",
                      "label": "[[[ return states['vacuum.pikachu'].attributes.battery_level + '%']]]",
                      "show_label": true,
                      "color": "rgb(253,216,53)",
                      "tap_action": {
                        "action": "call-service",
                        "service": "vacuum.pause",
                        "service_data": {
                          "entity_id": "vacuum.pikachu"
                        }
                      }
                    },
                    "returning": {
                      "type": "custom:button-card",
                      "entity": "vacuum.pikachu",
                      "template": "vacuum_more_info",
                      "label": "[[[ return states['vacuum.pikachu'].attributes.battery_level + '%']]]",
                      "show_label": true,
                      "color": "rgb(253,216,53)",
                      "tap_action": {
                        "action": "call-service",
                        "service": "vacuum.pause",
                        "service_data": {
                          "entity_id": "vacuum.pikachu"
                        }
                      }
                    },
                    "paused": {
                      "type": "custom:button-card",
                      "entity": "vacuum.pikachu",
                      "template": "vacuum_more_info",
                      "color": "rgb(68,115,158)",
                      "label": "[[[ return states['vacuum.pikachu'].attributes.battery_level + '%']]]",
                      "show_label": true,
                      "tap_action": {
                        "action": "call-service",
                        "service": "vacuum.start",
                        "service_data": {
                          "entity_id": "vacuum.pikachu"
                        }
                      },
                      "styles": {
                        "card": [
                          {
                            "background-color": "#f2900f"
                          }
                        ],
                        "label": [
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    "idle": {
                      "type": "custom:button-card",
                      "entity": "vacuum.pikachu",
                      "template": "vacuum_more_info",
                      "label": "[[[ return states['vacuum.pikachu'].attributes.battery_level + '%']]]",
                      "show_label": true,
                      "styles": {
                        "card": [
                          {
                            "background-color": "#9e110d"
                          }
                        ],
                        "label": [
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "entity": "input_boolean.away_mode",
                  "template": "top_row",
                  "double_tap_action": {
                    "action": "toggle"
                  },
                  "tap_action": {
                    "action": "more-info"
                  }
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:teddy-bear",
                  "template": "square_cell",
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_playroom"
                  },
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_playroom"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Playroom"
                            },
                            {
                              "type": "grid",
                              "columns": 5,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.playroom_motion",
                                  "template": "square_cell",
                                  "label": "Play",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.yard_motion",
                                  "template": "square_cell",
                                  "label": "Yard",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.yard_window_1",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.yard_window_2",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.yard_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_window_open_at_yard",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with windows open</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.raining_with_yard_windows_open",
                                  "state": "alert"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Heavy rain with windows open</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.raining_with_yard_windows_open",
                                  "state": "warning"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"warning\">Raining with windows open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['binary_sensor.ac_on_with_window_open_at_yard'].state == 'on')\n    return '#9e110d';\n  else if (states['sensor.raining_with_yard_windows_open'].state == 'alert')\n    return '#9e110d';\n  else if (states['sensor.raining_with_yard_windows_open'].state == 'warning')\n    return '#f2900f';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.playroom_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.playroom_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.playroom_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_playroom"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.playroom_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.yard_light_entity",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.yard_light_entity",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.yard_light_entity",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_yard"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.yard_light_entity",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.washer_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "error"
                    },
                    "Off": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "styles": {
                        "card": [
                          {
                            "background-color": "[[[\n  if (states['input_boolean.washer_load_clean'].state == 'on')\n    return '#b4fab4';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                          }
                        ]
                      }
                    },
                    "Standby": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info"
                    },
                    "Detecting": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "...",
                      "show_label": true
                    },
                    "Delay Set": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "[[[\n  return (states['sensor.washer_countdown'].state);\n]]]\n",
                      "show_label": true
                    },
                    "Washing": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "[[[\n  return (states['sensor.washer_countdown'].state);\n]]]\n",
                      "show_label": true
                    },
                    "Rinsing": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "[[[\n  return (states['sensor.washer_countdown'].state);\n]]]\n",
                      "show_label": true
                    },
                    "Spinning": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "[[[\n  return (states['sensor.washer_countdown'].state);\n]]]\n",
                      "show_label": true
                    },
                    "Finished": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "Done!",
                      "show_label": true
                    },
                    "Paused": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer_status",
                      "template": "washer_more_info",
                      "label": "Paused",
                      "show_label": true,
                      "color": "rgb(68,115,158)",
                      "styles": {
                        "label": [
                          {
                            "color": "var(--primary-background-color)"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    "Error": {
                      "type": "custom:button-card",
                      "entity": "sensor.washer",
                      "template": "washer_more_info",
                      "label": "Error",
                      "show_label": true,
                      "styles": {
                        "card": [
                          {
                            "background-color": "#9e110d"
                          }
                        ],
                        "label": [
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "template": "square_cell",
                  "icon": "mdi:bed",
                  "name": "Elena",
                  "show_name": true,
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_elenas_room"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_elenas_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Elena's Room"
                            },
                            {
                              "type": "grid",
                              "columns": 5,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.elenas_room_motion",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.elenas_room_door",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.elenas_room_temperature",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.elenas_room_humidity",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.elenas_room_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_elenas_room",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['binary_sensor.ac_on_with_door_open_at_elenas_room'].state == 'on')\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.elenas_room_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.elenas_room_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.elenas_room_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_elenas_room"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.elenas_room_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "automation.elenas_room_fan_auto_control",
                  "default": "off",
                  "states": {
                    "off": {
                      "type": "custom:state-switch",
                      "entity": "fan.elenas_room_fan",
                      "default": "disabled",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.elenas_room_fan",
                          "template": "error"
                        },
                        "off": {
                          "type": "custom:button-card",
                          "entity": "fan.elenas_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.elenas_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_on",
                            "service_data": {
                              "entity_id": "automation.elenas_room_fan_auto_control"
                            }
                          }
                        },
                        "on": {
                          "type": "custom:state-switch",
                          "entity": "input_select.elenas_room_fan_direction",
                          "default": "forward",
                          "states": {
                            "forward": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.elenas_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.elenas_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-down"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            },
                            "reverse": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.elenas_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.elenas_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-up"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "on": {
                      "type": "custom:state-switch",
                      "entity": "fan.elenas_room_fan",
                      "default": "available",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.elenas_room_fan",
                          "template": "error"
                        },
                        "available": {
                          "type": "custom:button-card",
                          "entity": "fan.elenas_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.elenas_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "label": "[[[ return states['fan.elenas_room_fan'].attributes.percentage + '%';]]]",
                          "show_label": true,
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_off",
                            "service_data": {
                              "entity_id": "automation.elenas_room_fan_auto_control"
                            }
                          },
                          "tap_action": {
                            "action": "call-service",
                            "service": "[[[\n  if (states['fan.elenas_room_fan'].state == 'off')\n    return \"fan.turn_on\";\n  else\n    return \"fan.turn_off\";\n]]]\n",
                            "service_data": {
                              "entity_id": "fan.elenas_room_fan"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.elenas_room_ac_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "climate.elenas_room_ac",
                      "template": "error"
                    },
                    "auto": {
                      "type": "custom:button-card",
                      "entity": "switch.elenas_room_ac_switch",
                      "template": "turn_on",
                      "label": "[[[ return states['sensor.elenas_room_temperature'].state + 'C';]]]",
                      "show_label": true,
                      "hold_action": {
                        "action": "more-info",
                        "entity": "climate.elenas_room_ac"
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": "automation.elenas_room_ac_auto_control"
                        }
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "[[[\n  if (states['climate.elenas_room_ac'].state == 'off')\n    return \"climate.turn_on\";\n  else\n    return \"climate.turn_off\";\n]]]\n",
                        "service_data": {
                          "entity_id": "climate.elenas_room_ac"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "climate.elenas_room_ac",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "climate.turn_on",
                        "service_data": {
                          "entity_id": "climate.elenas_room_ac"
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": "automation.elenas_room_ac_auto_control"
                        }
                      }
                    },
                    "cool": {
                      "type": "custom:slider-button-card",
                      "entity": "climate.elenas_room_ac",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.turn_on",
                          "service_data": {
                            "entity_id": "automation.elenas_room_ac_auto_control"
                          }
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:bed",
                  "name": "Eli",
                  "template": "square_cell",
                  "show_name": true,
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_elis_room"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_elis_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Eli's Room"
                            },
                            {
                              "type": "grid",
                              "columns": 5,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.elis_room_motion",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.elis_room_door",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.elis_room_temperature",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.elis_room_humidity",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.elis_room_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_elis_room",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['binary_sensor.ac_on_with_door_open_at_elis_room'].state == 'on')\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.elis_room_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.elis_room_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.elis_room_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_elis_room"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.elis_room_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "automation.elis_room_fan_auto_control",
                  "default": "off",
                  "states": {
                    "off": {
                      "type": "custom:state-switch",
                      "entity": "fan.elis_room_fan",
                      "default": "disabled",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.elis_room_fan",
                          "template": "error"
                        },
                        "off": {
                          "type": "custom:button-card",
                          "entity": "fan.elis_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.elis_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_on",
                            "service_data": {
                              "entity_id": "automation.elis_room_fan_auto_control"
                            }
                          }
                        },
                        "on": {
                          "type": "custom:state-switch",
                          "entity": "input_select.elis_room_fan_direction",
                          "default": "forward",
                          "states": {
                            "forward": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.elis_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.elis_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-down"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            },
                            "reverse": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.elis_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.elis_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-up"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "on": {
                      "type": "custom:state-switch",
                      "entity": "fan.elis_room_fan",
                      "default": "available",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.elis_room_fan",
                          "template": "error"
                        },
                        "available": {
                          "type": "custom:button-card",
                          "entity": "fan.elis_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.elis_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "label": "[[[ return states['fan.elis_room_fan'].attributes.percentage + '%';]]]",
                          "show_label": true,
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_off",
                            "service_data": {
                              "entity_id": "automation.elis_room_fan_auto_control"
                            }
                          },
                          "tap_action": {
                            "action": "call-service",
                            "service": "[[[\n  if (states['fan.elis_room_fan'].state == 'off')\n    return \"fan.turn_on\";\n  else\n    return \"fan.turn_off\";\n]]]\n",
                            "service_data": {
                              "entity_id": "fan.elis_room_fan"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.elis_room_ac_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "climate.elis_room_ac",
                      "template": "error"
                    },
                    "auto": {
                      "type": "custom:button-card",
                      "entity": "switch.elis_room_ac_switch",
                      "template": "turn_on",
                      "label": "[[[ return states['sensor.elis_room_temperature'].state + 'C';]]]",
                      "show_label": true,
                      "hold_action": {
                        "action": "more-info",
                        "entity": "climate.elis_room_ac"
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": "automation.elis_room_ac_auto_control"
                        }
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "[[[\n  if (states['climate.elis_room_ac'].state == 'off')\n    return \"climate.turn_on\";\n  else\n    return \"climate.turn_off\";\n]]]\n",
                        "service_data": {
                          "entity_id": "climate.elis_room_ac"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "climate.elis_room_ac",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "climate.turn_on",
                        "service_data": {
                          "entity_id": "climate.elis_room_ac"
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": "automation.elis_room_ac_auto_control"
                        }
                      }
                    },
                    "cool": {
                      "type": "custom:slider-button-card",
                      "entity": "climate.elis_room_ac",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.turn_on",
                          "service_data": {
                            "entity_id": "automation.elis_room_ac_auto_control"
                          }
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:swap-horizontal-circle-outline",
                  "template": "square_cell",
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_hallway"
                  },
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_hallway"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Hallway"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.elenas_room_door",
                                  "template": "square_cell",
                                  "label": "Elena",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.elis_room_door",
                                  "template": "square_cell",
                                  "label": "Eli",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.junior_bathroom_door",
                                  "template": "square_cell",
                                  "label": "Jr Bath",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.powder_room_door",
                                  "template": "square_cell",
                                  "label": "Powder",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.hallway_motion",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.hallway_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.hallway_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.hallway_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.hallway_lights",
                      "template": "turn_on"
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.hallway_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:toilet",
                  "template": "square_cell",
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.recommended_light_level_for_powder_room"
                  },
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_powder_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Powder Room"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.powder_room_motion",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.powder_room_door",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:state-switch",
                                  "entity": "switch.water_heater",
                                  "default": "disabled",
                                  "states": {
                                    "disabled": {
                                      "type": "custom:button-card",
                                      "icon": "mdi:water-boiler-off",
                                      "template": "square_cell"
                                    },
                                    "off": {
                                      "type": "custom:button-card",
                                      "entity": "switch.water_heater",
                                      "template": "square_cell",
                                      "hold_action": {
                                        "action": "more-info"
                                      }
                                    },
                                    "on": {
                                      "type": "custom:button-card",
                                      "entity": "switch.water_heater",
                                      "template": "square_cell",
                                      "hold_action": {
                                        "action": "more-info"
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.powder_room_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Please close the powder room door. Otherwise, vacuum will pause at  {{ ((now() + timedelta(minutes = 1)).time() | string)[:5] }}.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.powder_room_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "off"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Vacuum may get wet as it is running with the powder room door open.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_powder_room",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open.</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if ((states['binary_sensor.ac_on_with_door_open_at_powder_room'].state == 'on')\n      || (states['binary_sensor.vacuum_running_with_doors_open'].state == 'on'\n          && states['binary_sensor.powder_room_door'].state == 'on'))\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.powder_room_pendant_light_entity",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.powder_room_pendant_light_entity",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.powder_room_pendant_light_entity",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_powder_room"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.powder_room_pendant_light_entity",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:shower-head",
                  "template": "square_cell",
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.recommended_light_level_for_junior_bathroom"
                  },
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_junior_bathroom"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Junior Bathroom"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.junior_bathroom_motion",
                                  "template": "square_cell",
                                  "label": "Entry",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.junior_shower_motion",
                                  "template": "square_cell",
                                  "label": "Shower",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.junior_bathroom_door",
                                  "template": "square_cell"
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.junior_bathroom_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Please close the junior bathroom door. Otherwise, vacuum will pause at  {{ ((now() + timedelta(minutes = 1)).time() | string)[:5] }}.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.junior_bathroom_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "off"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Vacuum may get wet as it is running with the junior bathroom door open.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_junior_bathroom",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open.</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if ((states['binary_sensor.ac_on_with_door_open_at_junior_bathroom'].state == 'on')\n      || (states['binary_sensor.vacuum_running_with_doors_open'].state == 'on'\n          && states['binary_sensor.junior_bathroom_door'].state == 'on'))\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.junior_bathroom_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.junior_bathroom_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.junior_bathroom_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_junior_bathroom"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.junior_bathroom_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:pasta",
                  "template": "square_cell",
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_dining_room"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_dining_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Dining Room"
                            },
                            {
                              "type": "grid",
                              "columns": 5,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.dining_room_presence",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.main_door",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.dining_room_temperature",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.dining_room_humidity",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.dining_room_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.main_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Please close the main door. Otherwise, vacuum will pause at  {{ ((now() + timedelta(minutes = 1)).time() | string)[:5] }}.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.main_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "off"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Vacuum running with main door open.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_dining_room",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if ((states['binary_sensor.ac_on_with_door_open_at_dining_room'].state == 'on')\n      || (states['binary_sensor.vacuum_running_with_doors_open'].state == 'on'\n          && states['binary_sensor.main_door'].state == 'on'))\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.dining_room_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.dining_room_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.dining_room_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_dining_room_lights"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.dining_room_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.dining_room_pendant_light_entity",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.dining_room_pendant_light_entity",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.dining_room_pendant_light_entity",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_dining_room_pendant_light"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.dining_room_pendant_light_entity",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "automation.dining_room_fan_auto_control",
                  "default": "off",
                  "states": {
                    "off": {
                      "type": "custom:state-switch",
                      "entity": "fan.dining_room_fan",
                      "default": "disabled",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.dining_room_fan",
                          "template": "error"
                        },
                        "off": {
                          "type": "custom:button-card",
                          "entity": "fan.dining_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.dining_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_on",
                            "service_data": {
                              "entity_id": "automation.dining_room_fan_auto_control"
                            }
                          }
                        },
                        "on": {
                          "type": "custom:state-switch",
                          "entity": "sensor.dining_room_fan_direction",
                          "default": "forward",
                          "states": {
                            "forward": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.dining_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.dining_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-down"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            },
                            "reverse": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.dining_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.dining_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-up"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "on": {
                      "type": "custom:state-switch",
                      "entity": "fan.dining_room_fan",
                      "default": "available",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.dining_room_fan",
                          "template": "error"
                        },
                        "available": {
                          "type": "custom:button-card",
                          "entity": "fan.dining_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.dining_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "label": "[[[ return states['fan.dining_room_fan'].attributes.percentage + '%';]]]",
                          "show_label": true,
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_off",
                            "service_data": {
                              "entity_id": "automation.dining_room_fan_auto_control"
                            }
                          },
                          "tap_action": {
                            "action": "call-service",
                            "service": "[[[\n  if (states['fan.dining_room_fan'].state == 'off')\n    return \"fan.turn_on\";\n  else\n    return \"fan.turn_off\";\n]]]\n",
                            "service_data": {
                              "entity_id": "fan.dining_room_fan"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.dining_room_ac_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "climate.dining_room_ac",
                      "template": "error"
                    },
                    "auto": {
                      "type": "custom:button-card",
                      "entity": "switch.dining_room_ac_switch",
                      "template": "turn_on",
                      "label": "[[[ return states['sensor.dining_room_temperature'].state + 'C';]]]",
                      "show_label": true,
                      "hold_action": {
                        "action": "more-info",
                        "entity": "climate.dining_room_ac"
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": "automation.dining_room_ac_auto_control"
                        }
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "[[[\n  if (states['climate.dining_room_ac'].state == 'off')\n    return \"climate.turn_on\";\n  else\n    return \"climate.turn_off\";\n]]]\n",
                        "service_data": {
                          "entity_id": "climate.dining_room_ac"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "climate.dining_room_ac",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "climate.turn_on",
                        "service_data": {
                          "entity_id": "climate.dining_room_ac"
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": "automation.dining_room_ac_auto_control"
                        }
                      }
                    },
                    "cool": {
                      "type": "custom:slider-button-card",
                      "entity": "climate.dining_room_ac",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.turn_on",
                          "service_data": {
                            "entity_id": "automation.dining_room_ac_auto_control"
                          }
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "{% if is_state('cover.dining_room_blinds', 'unavailable') %} unavailable {% elif state_attr('cover.dining_room_blinds','current_position') == 100 %} open {% else %} not_open {% endif %}",
                  "default": "not_open",
                  "states": {
                    "unavailable": {
                      "type": "custom:button-card",
                      "entity": "cover.dining_room_blinds",
                      "template": "error"
                    },
                    "open": {
                      "type": "custom:button-card",
                      "entity": "cover.dining_room_blinds",
                      "template": "turn_on",
                      "color": "rgb(68,115,158)",
                      "tap_action": {
                        "action": "call-service",
                        "service": "cover.close_cover",
                        "service_data": {
                          "entity_id": "cover.dining_room_blinds"
                        }
                      }
                    },
                    "not_open": {
                      "type": "custom:slider-button-card",
                      "entity": "cover.dining_room_blinds",
                      "slider": {
                        "direction": "top-bottom",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "toggle_on_click": false,
                        "show_track": false,
                        "force_square": true,
                        "invert": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "template": "square_cell",
                  "icon": "mdi:sofa",
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_living_room"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_living_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Living Room"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.living_room_presence",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.dining_room_temperature",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.dining_room_humidity",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.living_room_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.living_room_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.living_room_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.living_room_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_living_room_lights"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.living_room_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.living_room_pendant_light_entity",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.living_room_pendant_light_entity",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.living_room_pendant_light_entity",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_living_room_pendant_light"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.living_room_pendant_light_entity",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "automation.living_room_fan_auto_control",
                  "default": "off",
                  "states": {
                    "off": {
                      "type": "custom:state-switch",
                      "entity": "fan.living_room_fan",
                      "default": "disabled",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.living_room_fan",
                          "template": "error"
                        },
                        "off": {
                          "type": "custom:button-card",
                          "entity": "fan.living_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.living_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_on",
                            "service_data": {
                              "entity_id": "automation.living_room_fan_auto_control"
                            }
                          }
                        },
                        "on": {
                          "type": "custom:state-switch",
                          "entity": "input_select.living_room_fan_direction",
                          "default": "forward",
                          "states": {
                            "forward": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.living_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.living_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-down"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            },
                            "reverse": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.living_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.living_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-up"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "on": {
                      "type": "custom:state-switch",
                      "entity": "fan.living_room_fan",
                      "default": "available",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.living_room_fan",
                          "template": "error"
                        },
                        "available": {
                          "type": "custom:button-card",
                          "entity": "fan.living_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.living_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "label": "[[[ return states['fan.living_room_fan'].attributes.percentage + '%';]]]",
                          "show_label": true,
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_off",
                            "service_data": {
                              "entity_id": "automation.living_room_fan_auto_control"
                            }
                          },
                          "tap_action": {
                            "action": "call-service",
                            "service": "[[[\n  if (states['fan.living_room_fan'].state == 'off')\n    return \"fan.turn_on\";\n  else\n    return \"fan.turn_off\";\n]]]\n",
                            "service_data": {
                              "entity_id": "fan.living_room_fan"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.living_room_ac_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "climate.living_room_ac",
                      "template": "error"
                    },
                    "auto": {
                      "type": "custom:button-card",
                      "entity": "switch.living_room_ac_switch",
                      "template": "turn_on",
                      "label": "[[[ return states['sensor.dining_room_temperature'].state + 'C';]]]",
                      "show_label": true,
                      "hold_action": {
                        "action": "more-info",
                        "entity": "climate.living_room_ac"
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": "automation.living_room_ac_auto_control"
                        }
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "[[[\n  if (states['climate.living_room_ac'].state == 'off')\n    return \"climate.turn_on\";\n  else\n    return \"climate.turn_off\";\n]]]\n",
                        "service_data": {
                          "entity_id": "climate.living_room_ac"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "climate.living_room_ac",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "climate.turn_on",
                        "service_data": {
                          "entity_id": "climate.living_room_ac"
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": "automation.living_room_ac_auto_control"
                        }
                      }
                    },
                    "cool": {
                      "type": "custom:slider-button-card",
                      "entity": "climate.living_room_ac",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.turn_on",
                          "service_data": {
                            "entity_id": "automation.living_room_ac_auto_control"
                          }
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "{% if is_state('cover.living_room_blinds', 'unavailable') %} unavailable {% elif state_attr('cover.living_room_blinds','current_position') == 100 %} open {% else %} not_open {% endif %}",
                  "default": "not_open",
                  "states": {
                    "unavailable": {
                      "type": "custom:button-card",
                      "entity": "cover.living_room_blinds",
                      "template": "error"
                    },
                    "open": {
                      "type": "custom:button-card",
                      "entity": "cover.living_room_blinds",
                      "template": "turn_on",
                      "color": "rgb(68,115,158)",
                      "tap_action": {
                        "action": "call-service",
                        "service": "cover.close_cover",
                        "service_data": {
                          "entity_id": "cover.living_room_blinds"
                        }
                      }
                    },
                    "not_open": {
                      "type": "custom:slider-button-card",
                      "entity": "cover.living_room_blinds",
                      "slider": {
                        "direction": "top-bottom",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "toggle_on_click": false,
                        "show_track": false,
                        "force_square": true,
                        "invert": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:bookshelf",
                  "template": "square_cell",
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_study_room"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_study_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Study Room"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.study_walkway_motion",
                                  "template": "square_cell",
                                  "label": "Walkway",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.study_room_presence",
                                  "template": "square_cell",
                                  "label": "Desk",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.study_room_ethernet_connection",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.parents_room_door",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.study_room_temperature",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.study_room_humidity",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.study_walkway_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_study_room",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['binary_sensor.ac_on_with_door_open_at_study_room'].state == 'on')\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.study_room_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.study_room_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.study_room_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_study_room"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.study_room_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "automation.study_room_fan_auto_control",
                  "default": "off",
                  "states": {
                    "off": {
                      "type": "custom:state-switch",
                      "entity": "fan.study_room_fan",
                      "default": "disabled",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.study_room_fan",
                          "template": "error"
                        },
                        "off": {
                          "type": "custom:button-card",
                          "entity": "fan.study_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.study_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_on",
                            "service_data": {
                              "entity_id": "automation.study_room_fan_auto_control"
                            }
                          }
                        },
                        "on": {
                          "type": "custom:state-switch",
                          "entity": "input_select.study_room_fan_direction",
                          "default": "forward",
                          "states": {
                            "forward": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.study_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.study_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-down"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            },
                            "reverse": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.study_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.study_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-up"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "on": {
                      "type": "custom:state-switch",
                      "entity": "fan.study_room_fan",
                      "default": "available",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.study_room_fan",
                          "template": "error"
                        },
                        "available": {
                          "type": "custom:button-card",
                          "entity": "fan.study_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.study_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "label": "[[[ return states['fan.study_room_fan'].attributes.percentage + '%';]]]",
                          "show_label": true,
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_off",
                            "service_data": {
                              "entity_id": "automation.study_room_fan_auto_control"
                            }
                          },
                          "tap_action": {
                            "action": "call-service",
                            "service": "[[[\n  if (states['fan.study_room_fan'].state == 'off')\n    return \"fan.turn_on\";\n  else\n    return \"fan.turn_off\";\n]]]\n",
                            "service_data": {
                              "entity_id": "fan.study_room_fan"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.study_room_ac_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "climate.study_room_ac",
                      "template": "error"
                    },
                    "auto": {
                      "type": "custom:button-card",
                      "entity": "switch.study_room_ac_switch",
                      "template": "turn_on",
                      "label": "[[[ return states['sensor.study_room_temperature'].state + 'C';]]]",
                      "show_label": true,
                      "hold_action": {
                        "action": "more-info",
                        "entity": "climate.study_room_ac"
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": "automation.study_room_ac_auto_control"
                        }
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "[[[\n  if (states['climate.study_room_ac'].state == 'off')\n    return \"climate.turn_on\";\n  else\n    return \"climate.turn_off\";\n]]]\n",
                        "service_data": {
                          "entity_id": "climate.study_room_ac"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "climate.study_room_ac",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "climate.turn_on",
                        "service_data": {
                          "entity_id": "climate.study_room_ac"
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": "automation.study_room_ac_auto_control"
                        }
                      }
                    },
                    "cool": {
                      "type": "custom:slider-button-card",
                      "entity": "climate.study_room_ac",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.turn_on",
                          "service_data": {
                            "entity_id": "automation.study_room_ac_auto_control"
                          }
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:bed",
                  "name": "D&G",
                  "show_name": true,
                  "template": "square_cell",
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_parents_room"
                  },
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_parents_room"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Parents' Room"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.parents_room_motion",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.parents_room_door",
                                  "template": "square_cell",
                                  "label": "Bedroom",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.master_bathroom_door",
                                  "template": "square_cell",
                                  "label": "Bathroom",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.parents_room_temperature",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.parents_room_humidity",
                                  "template": "square_cell",
                                  "show_state": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.parents_room_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_doors_open_at_parents_room",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with doors open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['binary_sensor.ac_on_with_doors_open_at_parents_room'].state == 'on')\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.parents_room_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.parents_room_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.parents_room_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_parents_room"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.parents_room_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "automation.parents_room_fan_auto_control",
                  "default": "off",
                  "states": {
                    "off": {
                      "type": "custom:state-switch",
                      "entity": "fan.parents_room_fan",
                      "default": "disabled",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.parents_room_fan",
                          "template": "error"
                        },
                        "off": {
                          "type": "custom:button-card",
                          "entity": "fan.parents_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.parents_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_on",
                            "service_data": {
                              "entity_id": "automation.parents_room_fan_auto_control"
                            }
                          }
                        },
                        "on": {
                          "type": "custom:state-switch",
                          "entity": "input_select.parents_room_fan_direction",
                          "default": "forward",
                          "states": {
                            "forward": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.parents_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.parents_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-down"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            },
                            "reverse": {
                              "type": "custom:slider-button-card",
                              "entity": "fan.parents_room_fan",
                              "slider": {
                                "direction": "bottom-top",
                                "background": "solid",
                                "use_state_color": false,
                                "use_percentage_bg_opacity": false,
                                "show_track": false,
                                "toggle_on_click": false,
                                "force_square": true
                              },
                              "show_name": false,
                              "show_state": false,
                              "compact": true,
                              "icon": {
                                "show": true,
                                "use_state_color": true,
                                "tap_action": {
                                  "action": "call-service",
                                  "service": "automation.turn_on",
                                  "service_data": {
                                    "entity_id": "automation.parents_room_fan_auto_control"
                                  }
                                },
                                "icon": "mdi:fan-chevron-up"
                              },
                              "action_button": {
                                "mode": "toggle",
                                "icon": "mdi:power",
                                "show": false,
                                "show_spinner": true,
                                "tap_action": {
                                  "action": "toggle"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "on": {
                      "type": "custom:state-switch",
                      "entity": "fan.parents_room_fan",
                      "default": "available",
                      "states": {
                        "disabled": {
                          "type": "custom:button-card",
                          "entity": "fan.parents_room_fan",
                          "template": "error"
                        },
                        "available": {
                          "type": "custom:button-card",
                          "entity": "fan.parents_room_fan",
                          "template": "turn_on",
                          "icon": "[[[ if (states['fan.parents_room_fan'].attributes.direction == 'forward') return 'mdi:fan-chevron-down'; else return 'mdi:fan-chevron-up' ]]]",
                          "label": "[[[ return states['fan.parents_room_fan'].attributes.percentage + '%';]]]",
                          "show_label": true,
                          "double_tap_action": {
                            "action": "call-service",
                            "service": "automation.turn_off",
                            "service_data": {
                              "entity_id": "automation.parents_room_fan_auto_control"
                            }
                          },
                          "tap_action": {
                            "action": "call-service",
                            "service": "[[[\n  if (states['fan.parents_room_fan'].state == 'off')\n    return \"fan.turn_on\";\n  else\n    return \"fan.turn_off\";\n]]]\n",
                            "service_data": {
                              "entity_id": "fan.parents_room_fan"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "sensor.parents_room_ac_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "climate.parents_room_ac",
                      "template": "error"
                    },
                    "auto": {
                      "type": "custom:button-card",
                      "entity": "switch.parents_room_ac_switch",
                      "template": "turn_on",
                      "label": "[[[ return states['sensor.parents_room_temperature'].state + 'C';]]]",
                      "show_label": true,
                      "hold_action": {
                        "action": "more-info",
                        "entity": "climate.parents_room_ac"
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": "automation.parents_room_ac_auto_control"
                        }
                      },
                      "tap_action": {
                        "action": "call-service",
                        "service": "[[[\n  if (states['climate.parents_room_ac'].state == 'off')\n    return \"climate.turn_on\";\n  else\n    return \"climate.turn_off\";\n]]]\n",
                        "service_data": {
                          "entity_id": "climate.parents_room_ac"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "climate.parents_room_ac",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "climate.turn_on",
                        "service_data": {
                          "entity_id": "climate.parents_room_ac"
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": "automation.parents_room_ac_auto_control"
                        }
                      }
                    },
                    "cool": {
                      "type": "custom:slider-button-card",
                      "entity": "climate.parents_room_ac",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.turn_on",
                          "service_data": {
                            "entity_id": "automation.parents_room_ac_auto_control"
                          }
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:bathtub",
                  "template": "square_cell",
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.turn_on",
                    "service_data": {
                      "entity_id": [
                        "script.recommended_light_level_for_master_bathroom_light",
                        "script.recommended_light_level_for_master_bathroom_pendant_light"
                      ]
                    }
                  },
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_master_bathroom"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Parents' Bathroom"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.master_bathroom_motion",
                                  "template": "square_cell",
                                  "label": "Entry",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.master_shower_motion",
                                  "template": "square_cell",
                                  "label": "Shower",
                                  "show_label": true
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.master_bathroom_door",
                                  "template": "square_cell"
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.master_bathroom_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Please close the master bathroom door. Otherwise, vacuum will pause at  {{ ((now() + timedelta(minutes = 1)).time() | string)[:5] }}.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.vacuum_running_with_doors_open",
                                  "state": "on"
                                },
                                {
                                  "entity": "binary_sensor.master_bathroom_door",
                                  "state": "on"
                                },
                                {
                                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                                  "state": "off"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Vacuum may get wet as it is running with the master bathroom door open.</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_door_open_at_master_bathroom",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with door open.</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if ((states['binary_sensor.ac_on_with_door_open_at_master_bathroom'].state == 'on')\n      || (states['binary_sensor.vacuum_running_with_doors_open'].state == 'on'\n          && states['binary_sensor.master_bathroom_door'].state == 'on'))\n    return '#9e110d';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.master_bathroom_light_entity",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.master_bathroom_light_entity",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.master_bathroom_light_entity",
                      "template": "turn_on"
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.master_bathroom_light_entity",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.master_bathroom_pendant_light_entity",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.master_bathroom_pendant_light_entity",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.master_bathroom_pendant_light_entity",
                      "template": "turn_on"
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.master_bathroom_pendant_light_entity",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:button-card",
                  "color_type": "blank-card"
                },
                {
                  "type": "custom:state-switch",
                  "entity": "{% if is_state('cover.master_bathroom_blind', 'unavailable') %} unavailable {% elif state_attr('cover.master_bathroom_blind','current_position') == 100 %} open {% else %} not_open {% endif %}",
                  "default": "not_open",
                  "states": {
                    "unavailable": {
                      "type": "custom:button-card",
                      "entity": "cover.master_bathroom_blind",
                      "template": "error"
                    },
                    "open": {
                      "type": "custom:button-card",
                      "entity": "cover.master_bathroom_blind",
                      "template": "turn_on",
                      "color": "rgb(68,115,158)",
                      "tap_action": {
                        "action": "call-service",
                        "service": "cover.close_cover",
                        "service_data": {
                          "entity_id": "cover.master_bathroom_blind"
                        }
                      }
                    },
                    "not_open": {
                      "type": "custom:slider-button-card",
                      "slider": {
                        "direction": "top-bottom",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "toggle_on_click": false,
                        "show_track": false,
                        "force_square": true,
                        "invert": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      },
                      "entity": "cover.master_bathroom_blind"
                    }
                  }
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:pot-steam",
                  "template": "square_cell",
                  "tap_action": {
                    "action": "call-service",
                    "service": "script.set_recommended_scene_in_kitchen"
                  },
                  "double_tap_action": {
                    "action": "call-service",
                    "service": "script.turn_off_kitchen"
                  },
                  "hold_action": {
                    "action": "fire-dom-event",
                    "browser_mod": {
                      "service": "browser_mod.popup",
                      "data": {
                        "dismissable": true,
                        "content": {
                          "type": "vertical-stack",
                          "cards": [
                            {
                              "type": "markdown",
                              "content": "## Kitchen"
                            },
                            {
                              "type": "grid",
                              "columns": 4,
                              "square": true,
                              "cards": [
                                {
                                  "type": "custom:button-card",
                                  "entity": "binary_sensor.kitchen_presence",
                                  "template": "square_cell"
                                },
                                {
                                  "type": "custom:button-card",
                                  "entity": "sensor.kitchen_lux",
                                  "template": "square_cell",
                                  "show_state": true
                                }
                              ]
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.ac_on_with_window_open_at_kitchen",
                                  "state": "on"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">AC on with window open</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.raining_with_kitchen_window_open",
                                  "state": "alert"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"error\">Heavy rain with window open</ha-alert>"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.raining_with_kitchen_window_open",
                                  "state": "warning"
                                }
                              ],
                              "card": {
                                "type": "markdown",
                                "content": "<ha-alert alert-type=\"warning\">Raining with window open</ha-alert>"
                              }
                            }
                          ]
                        },
                        "style": "--popup-border-radius: 6px\n"
                      }
                    }
                  },
                  "styles": {
                    "card": [
                      {
                        "background-color": "[[[\n  if (states['binary_sensor.ac_on_with_window_open_at_kitchen'].state == 'on')\n    return '#9e110d';\n  else if (states['sensor.raining_with_kitchen_window_open'].state == 'alert')\n    return '#9e110d';\n  else if (states['sensor.raining_with_kitchen_window_open'].state == 'warning')\n    return '#f2900f';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "light.kitchen_lights",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "light.kitchen_lights",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "light.kitchen_lights",
                      "template": "turn_on",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.recommended_light_level_for_kitchen"
                      }
                    },
                    "on": {
                      "type": "custom:slider-button-card",
                      "entity": "light.kitchen_lights",
                      "slider": {
                        "direction": "bottom-top",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "input_select.rice_cooker_status",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.rice_cooker",
                      "template": "error"
                    },
                    "Off": {
                      "type": "custom:button-card",
                      "entity": "switch.rice_cooker",
                      "template": "rice_cooker_more_info"
                    },
                    "Cooking": {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.rice_cooker",
                      "template": "rice_cooker_more_info",
                      "label": "Cook",
                      "show_label": true
                    },
                    "Warming": {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.rice_cooker",
                      "template": "rice_cooker_more_info",
                      "label": "Warm",
                      "show_label": true
                    },
                    "Standby": {
                      "type": "custom:button-card",
                      "entity": "switch.rice_cooker",
                      "template": "rice_cooker_more_info",
                      "label": "...",
                      "show_label": true
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "switch.stove_main_power",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "switch.stove_main_power",
                      "template": "error"
                    },
                    "on": {
                      "type": "custom:button-card",
                      "entity": "switch.stove_main_power",
                      "template": "stove_more_info",
                      "icon": "[[[ return 'mdi:chevron-' + states['select.stove_current_burner'].state + '-circle-outline' ]]]",
                      "label": "[[[ \n  if (parseInt(states['number.stove_current_burner_timer'].state) >= 70)\n    return states['select.stove_current_burner_power'].state + '|1:' +\n      (parseInt(states['number.stove_current_burner_timer'].state) - 60).toString()\n  else if (parseInt(states['number.stove_current_burner_timer'].state) >= 60)\n    return states['select.stove_current_burner_power'].state + '|1:0' +\n      (parseInt(states['number.stove_current_burner_timer'].state) - 60).toString()\n  else if (parseInt(states['number.stove_current_burner_timer'].state) >= 10)\n    return states['select.stove_current_burner_power'].state + '|0:' +\n      states['number.stove_current_burner_timer'].state\n  else if (parseInt(states['number.stove_current_burner_timer'].state) > 0)\n    return states['select.stove_current_burner_power'].state + '|0:0' +\n      states['number.stove_current_burner_timer'].state\n  else\n    return states['select.stove_current_burner_power'].state\n]]]",
                      "show_label": true,
                      "tap_action": {
                        "action": "call-service",
                        "service": "select.select_option",
                        "service_data": {
                          "entity_id": "select.stove_current_burner",
                          "option": "[[[\n  if (states['select.stove_current_burner'].state == 'right')\n    return 'left'\n  else\n    return 'right'\n]]]"
                        }
                      }
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "switch.stove_main_power",
                      "template": "stove_more_info"
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "binary_sensor.dishwasher",
                  "default": "disabled",
                  "states": {
                    "disabled": {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.dishwasher",
                      "template": "error"
                    },
                    "off": {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.dishwasher",
                      "template": "dishwasher_more_info",
                      "styles": {
                        "card": [
                          {
                            "background-color": "[[[\n  if (states['input_boolean.dishwasher_load_clean'].state == 'on')\n    return '#b4fab4';\n  else\n    return 'var(--secondary-background-color)';\n]]]\n"
                          }
                        ]
                      }
                    },
                    "on": {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.dishwasher",
                      "template": "dishwasher_more_info",
                      "label": "[[[\n  if (states['input_select.dishwasher_status'].state == 'Washing')\n    return 'Wash'\n  else if (states['input_select.dishwasher_status'].state == 'Cooling')\n    return 'Cool'\n  else if (states['input_select.dishwasher_status'].state == 'Standby')\n    return '...'\n  else\n    return ''\n]]]\n",
                      "show_label": true
                    }
                  }
                },
                {
                  "type": "custom:state-switch",
                  "entity": "{% if is_state('cover.kitchen_blind', 'unavailable') %} unavailable {% elif state_attr('cover.kitchen_blind','current_position') == 100 %} open {% else %} not_open {% endif %}",
                  "default": "not_open",
                  "states": {
                    "unavailable": {
                      "type": "custom:button-card",
                      "entity": "cover.kitchen_blind",
                      "template": "error"
                    },
                    "open": {
                      "type": "custom:button-card",
                      "entity": "cover.kitchen_blind",
                      "template": "turn_on",
                      "color": "rgb(68,115,158)",
                      "tap_action": {
                        "action": "call-service",
                        "service": "cover.close_cover",
                        "service_data": {
                          "entity_id": "cover.kitchen_blind"
                        }
                      }
                    },
                    "not_open": {
                      "type": "custom:slider-button-card",
                      "entity": "cover.kitchen_blind",
                      "slider": {
                        "direction": "top-bottom",
                        "background": "solid",
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "toggle_on_click": false,
                        "show_track": false,
                        "force_square": true,
                        "invert": true
                      },
                      "show_name": false,
                      "show_state": false,
                      "compact": true,
                      "icon": {
                        "show": true,
                        "use_state_color": true,
                        "tap_action": {
                          "action": "more-info"
                        },
                        "icon": ""
                      },
                      "action_button": {
                        "mode": "toggle",
                        "icon": "mdi:power",
                        "show": false,
                        "show_spinner": true,
                        "tap_action": {
                          "action": "toggle"
                        }
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "theme": "no_border",
          "title": "Sensors",
          "path": "sensors",
          "icon": "mdi:home-search",
          "visible": [
            {
              "user": "ad2bcce775894550affb6dfef93a2a36"
            },
            {
              "user": "2651cb9042dd41acb0b54327457a9a14"
            },
            {
              "user": "991e26502d6844dea64362276571d6c1"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "top_row",
                      "icon": "mdi:information-outline",
                      "styles": {
                        "card": [
                          {
                            "border-radius": "50%"
                          }
                        ]
                      },
                      "tap_action": {
                        "action": "fire-dom-event",
                        "browser_mod": {
                          "service": "browser_mod.popup",
                          "data": {
                            "title": "Legend",
                            "dismissable": true,
                            "content": {
                              "type": "vertical-stack",
                              "cards": [
                                {
                                  "type": "horizontal-stack",
                                  "cards": [
                                    {
                                      "type": "custom:button-card",
                                      "icon": "mdi:motion-sensor"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Minutes",
                                      "show_label": true
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Motion",
                                      "show_label": true,
                                      "color": "#b4fab4",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "color_type": "blank-card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Clear",
                                      "show_label": true,
                                      "color": "#9e110d",
                                      "color_type": "card"
                                    }
                                  ]
                                },
                                {
                                  "type": "horizontal-stack",
                                  "cards": [
                                    {
                                      "type": "custom:button-card",
                                      "icon": "mdi:door-open"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "# Open",
                                      "show_label": true
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Open",
                                      "show_label": true,
                                      "color": "#b4fab4",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "color_type": "blank-card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Closed",
                                      "show_label": true,
                                      "color": "#9e110d",
                                      "color_type": "card"
                                    }
                                  ]
                                },
                                {
                                  "type": "horizontal-stack",
                                  "cards": [
                                    {
                                      "type": "custom:button-card",
                                      "icon": "mdi:window-open"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "# Open",
                                      "show_label": true
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Open",
                                      "show_label": true,
                                      "color": "#b4fab4",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "color_type": "blank-card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Closed",
                                      "show_label": true,
                                      "color": "#9e110d",
                                      "color_type": "card"
                                    }
                                  ]
                                },
                                {
                                  "type": "horizontal-stack",
                                  "cards": [
                                    {
                                      "type": "custom:button-card",
                                      "icon": "mdi:thermometer"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "C",
                                      "show_label": true
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Cool",
                                      "show_label": true,
                                      "color": "#b4fab4",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Warm",
                                      "show_label": true,
                                      "color": "#f2900f",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Hot",
                                      "show_label": true,
                                      "color": "#9e110d",
                                      "color_type": "card"
                                    }
                                  ]
                                },
                                {
                                  "type": "horizontal-stack",
                                  "cards": [
                                    {
                                      "type": "custom:button-card",
                                      "icon": "mdi:water-percent"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "%",
                                      "show_label": true
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Dry",
                                      "show_label": true,
                                      "color": "#b4fab4",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Humid",
                                      "show_label": true,
                                      "color": "#f2900f",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Muggy",
                                      "show_label": true,
                                      "color": "#9e110d",
                                      "color_type": "card"
                                    }
                                  ]
                                },
                                {
                                  "type": "horizontal-stack",
                                  "cards": [
                                    {
                                      "type": "custom:button-card",
                                      "icon": "mdi:brightness-5"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Lux",
                                      "show_label": true
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Bright",
                                      "show_label": true,
                                      "color": "#b4fab4",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Dim",
                                      "show_label": true,
                                      "color": "#f2900f",
                                      "color_type": "card"
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "label": "Dark",
                                      "show_label": true,
                                      "color": "#9e110d",
                                      "color_type": "card"
                                    }
                                  ]
                                }
                              ]
                            },
                            "style": "--popup-border-radius: 6px\n"
                          }
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:motion-sensor",
                      "label": "min",
                      "show_label": true,
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:door-open",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:window-open",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:thermometer",
                      "label": "C",
                      "show_label": true,
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:water-percent",
                      "label": "%",
                      "show_label": true,
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:brightness-5",
                      "label": "lux",
                      "show_label": true,
                      "template": "square_cell"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:teddy-bear",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.playroom_motion_sensors",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.yard_window",
                      "label": "[[[\n  if (entity.attributes.total_panes_open == \"0/2\")\n    return ''\n  else\n    return entity.attributes.total_panes_open \n]]]\n",
                      "show_label": true,
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:shower-head",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "input_boolean.junior_bathroom_occupancy",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.junior_bathroom_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:toilet",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "input_boolean.powder_room_occupancy",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.powder_room_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bed",
                      "label": "Elena",
                      "show_label": true,
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.elenas_room_motion",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.elenas_room_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_temperature",
                      "template": "sensor_temperature"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_humidity",
                      "template": "sensor_humidity"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bed",
                      "label": "Eli",
                      "show_label": true,
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.elis_room_motion",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.elis_room_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_temperature",
                      "template": "sensor_temperature"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_humidity",
                      "template": "sensor_humidity"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:swap-horizontal-circle-outline",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.hallway_motion",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.hallway_doors",
                      "label": "[[[ \n  if (entity.attributes.total_doors_open == \"0/4\")\n    return ''\n  else\n    return entity.attributes.total_doors_open\n]]]\n",
                      "show_label": true,
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.hallway_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:pasta",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.dining_room_presence",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.main_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_temperature",
                      "template": "sensor_temperature"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_humidity",
                      "template": "sensor_humidity"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:sofa",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.living_room_presence",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bookshelf",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.study_room_motion",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.parents_room_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_temperature",
                      "template": "sensor_temperature"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_humidity",
                      "template": "sensor_humidity"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_walkway_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bed",
                      "label": "D&G",
                      "show_label": true,
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.parents_room_motion",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.parents_room_doors",
                      "label": "[[[ \n  if (entity.attributes.total_doors_open == '0/2')\n    return ''\n  else\n    return entity.attributes.total_doors_open\n]]]\n",
                      "show_label": true,
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_temperature",
                      "template": "sensor_temperature"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_humidity",
                      "template": "sensor_humidity"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_lux",
                      "template": "sensor_lux"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bathtub",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "input_boolean.master_bathroom_occupancy",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.master_bathroom_door",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:pot-steam",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.kitchen_presence",
                      "template": "sensor_motion"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "binary_sensor.kitchen_window",
                      "template": "sensor_binary"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_lux",
                      "template": "sensor_lux"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "no_border",
          "title": "Zigbee Diagnostics",
          "path": "zigbee-diagnostics",
          "icon": "mdi:zigbee",
          "visible": [
            {
              "user": "ad2bcce775894550affb6dfef93a2a36"
            }
          ],
          "type": "panel",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bed",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_fan_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_ac_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_temperature_humidity_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elenas_room_ac_vent_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bed",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_fan_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_ac_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_temperature_humidity_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.elis_room_ac_vent_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:shower-head",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.junior_bathroom_pendant_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.junior_bathroom_ceiling_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.junior_bathroom_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.junior_bathroom_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.junior_bathroom_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.junior_shower_motion_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:toilet",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.powder_room_pendant_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.powder_room_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.powder_room_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.powder_room_motion_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:swap-horizontal-circle-outline",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.hallway_router_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.hallway_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.hallway_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_lights_controller_2_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_fan_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_ac_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_blinds_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.hallway_motion_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:teddy-bear",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.yard_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.yard_window_1_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.yard_window_2_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.playroom_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.yard_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.washer_door_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:pasta",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_bulb_4_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_pendant_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_left_blind_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_right_blind_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_lights_controller_1_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.main_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_temperature_humidity_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dining_room_ac_vent_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:sofa",
                      "template": "square_cell",
                      "styles": {
                        "card": [
                          {
                            "border-color": "#b4fab4"
                          },
                          {
                            "border-width": "2px"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_bulb_4_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_bulb_5_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_pendant_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_left_blind_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_right_blind_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_fan_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_ac_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_blinds_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.living_room_ac_vent_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:pot-steam",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_ceiling_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_blind_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_blind_opened_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_blind_closed_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.kitchen_sink_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.rice_cooker_lid_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.dishwasher_door_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bookshelf",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_bulb_4_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_fan_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_ac_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_table_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_temperature_humidity_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_walkway_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.study_room_ac_vent_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bed",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_repeater_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_bulb_1_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_bulb_2_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_bulb_3_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_bulb_4_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_fan_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_ac_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_headboard_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_temperature_humidity_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.parents_room_ac_vent_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "icon": "mdi:bathtub",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_pendant_light_entity_lqi",
                      "template": "zigbee_router"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_blind_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_lights_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_blind_controller_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_door_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_bathroom_motion_lqi",
                      "template": "zigbee_endpoint"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.master_shower_motion_lqi",
                      "template": "zigbee_endpoint"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "no_border",
          "title": "Settings",
          "path": "settings",
          "icon": "mdi:cogs",
          "badges": [],
          "cards": [
            {
              "square": true,
              "columns": 4,
              "type": "grid",
              "cards": [
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/settings-sleep"
                  },
                  "name": "Sleep",
                  "icon": "mdi:bed-clock",
                  "hold_action": {
                    "action": "none"
                  }
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/settings-lighting"
                  },
                  "name": "Lighting",
                  "icon": "mdi:home-lightbulb-outline",
                  "hold_action": {
                    "action": "none"
                  }
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/settings-cooling"
                  },
                  "icon": "mdi:home-thermometer-outline",
                  "hold_action": {
                    "action": "none"
                  },
                  "name": "Cooling"
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/motion"
                  },
                  "name": "Motion",
                  "icon": "mdi:motion-sensor",
                  "hold_action": {
                    "action": "none"
                  }
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/automations"
                  },
                  "name": "Automation",
                  "icon": "mdi:home-automation"
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/network"
                  },
                  "name": "Network",
                  "icon": "mdi:server-security"
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/diagnostics"
                  },
                  "name": "Diagnostic Thresholds",
                  "icon": "mdi:arrow-expand-vertical"
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "subview": true,
          "title": "Settings - Sleep",
          "path": "settings-sleep",
          "icon": "mdi:sleep",
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_datetime.elenas_wind_down"
                },
                {
                  "entity": "input_datetime.elenas_bedtime"
                },
                {
                  "entity": "input_datetime.wind_down"
                },
                {
                  "entity": "input_datetime.sleep_hours_start"
                },
                {
                  "entity": "input_datetime.sleep_hours_end"
                }
              ]
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_datetime.elis_school_day_alarm"
                },
                {
                  "entity": "input_boolean.elis_school_day_alarm_enabled"
                },
                {
                  "entity": "input_datetime.elenas_school_day_alarm"
                },
                {
                  "entity": "input_boolean.elenas_school_day_alarm_enabled"
                },
                {
                  "entity": "automation.parents_room_school_day_alarm"
                },
                {
                  "entity": "automation.parents_room_eca_day_alarm"
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Settings - Lighting",
          "path": "settings-lighting",
          "icon": "mdi:home-lightbulb-outline",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_number.minimum_lux"
                },
                {
                  "entity": "input_number.comfortable_lux"
                },
                {
                  "entity": "input_number.maximum_lux"
                },
                {
                  "entity": "input_number.light_brightness_change_step",
                  "name": "Brightness Change"
                },
                {
                  "entity": "input_number.morning_light_brightness",
                  "name": "Morning Brightness"
                },
                {
                  "entity": "input_number.night_light_brightness",
                  "name": "Night Brightness"
                },
                {
                  "entity": "input_datetime.dim_hours_start"
                },
                {
                  "entity": "input_datetime.dim_hours_end"
                }
              ]
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_number.blinds_auto_control_debounce",
                  "name": "Blinds Debounce"
                },
                {
                  "entity": "automation.south_facing_blinds_auto_control",
                  "name": "Auto South-Facing Blinds"
                },
                {
                  "entity": "automation.kitchen_blind_auto_control",
                  "name": "Auto Kitchen Blinds"
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Settings - Cooling",
          "path": "settings-cooling",
          "icon": "mdi:home-thermometer-outline",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_datetime.ac_auto_control_start",
                      "name": "Auto Control Start"
                    },
                    {
                      "entity": "input_datetime.ac_auto_control_end",
                      "name": "Auto Control End"
                    },
                    {
                      "entity": "input_number.ac_resync_delay",
                      "name": "Resync Delay"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_number.sitting_rooms_fan_speed_when_cool",
                      "name": "Cool Speed"
                    },
                    {
                      "entity": "input_number.sitting_rooms_fan_speed_when_warm",
                      "name": "Warm Speed"
                    },
                    {
                      "entity": "input_number.sitting_rooms_lucci_fan_speed_when_warm",
                      "name": "Lucci: Warm Speed"
                    }
                  ],
                  "title": "Sitting Rooms"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_number.bedrooms_fan_speed_when_cool",
                      "name": "Cool Speed"
                    },
                    {
                      "entity": "input_number.bedrooms_fan_speed_when_warm",
                      "name": "Warm Speed"
                    }
                  ],
                  "title": "Bedrooms"
                }
              ]
            }
          ]
        },
        {
          "theme": "no_border",
          "title": "Automation",
          "path": "automations",
          "icon": "mdi:home-automation",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_number.holiday_advance_reminder",
                  "name": "Holiday Reminders"
                },
                {
                  "entity": "automation.notify_when_vacuum_running_with_doors_open",
                  "name": "Warn if Vacuum May Get Wet",
                  "icon": ""
                },
                {
                  "entity": "input_boolean.party_mode"
                }
              ]
            }
          ]
        },
        {
          "title": "Diagnostic Thresholds",
          "path": "diagnostics",
          "icon": "mdi:arrow-expand-vertical",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_number.temperature_threshold_cold",
                  "name": "Temperature - Cold"
                },
                {
                  "entity": "input_number.temperature_threshold_warm",
                  "name": "Temperature - Hot"
                },
                {
                  "entity": "input_number.humidity_threshold_low",
                  "name": "Humidity - Low"
                },
                {
                  "entity": "input_number.humidity_threshold_high",
                  "name": "Humidity - High"
                },
                {
                  "entity": "input_number.zigbee_lqi_threshold_poor",
                  "name": "Zigbee LQI - Low"
                },
                {
                  "entity": "input_number.zigbee_lqi_threshold_moderate",
                  "name": "Zigbee LQI - High"
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Network",
          "path": "network",
          "icon": "mdi:server-security",
          "subview": true,
          "visible": [
            {
              "user": "ad2bcce775894550affb6dfef93a2a36"
            },
            {
              "user": "2651cb9042dd41acb0b54327457a9a14"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "markdown",
                  "content": "## Proxmox"
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "color_type": "blank-card"
                        },
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:clock-start",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:cpu-64-bit",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:memory",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:harddisk",
                          "template": "square_cell"
                        }
                      ]
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:server",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.proxmox_last_boot",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.node_proxmox_cpu_used",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.node_proxmox_memory_used_percentage",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.node_proxmox_disk_used_percentage",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        }
                      ]
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:router-wireless",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.pfsense_last_boot",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.qemu_pfsense_100_cpu_used",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.qemu_pfsense_100_memory_used_percentage",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.pfsense_filesystem_used_percentage_slash",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        }
                      ]
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:home-assistant",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.home_assistant_last_boot",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.qemu_eloquent_house_101_cpu_used",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.qemu_eloquent_house_101_memory_used_percentage",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.disk_use_percent",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        }
                      ]
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "icon": "mdi:docker",
                          "template": "square_cell"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.docker_last_boot",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.qemu_docker_102_cpu_used",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "entity": "sensor.qemu_docker_102_memory_used_percentage",
                          "template": "square_cell",
                          "show_icon": false,
                          "show_state": true,
                          "state_display": "[[[ return parseFloat(entity.state).toFixed(1) + '%']]]"
                        },
                        {
                          "type": "custom:button-card",
                          "color_type": "blank-card"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "markdown",
                  "content": "## pfSense"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.pfsense_pf_state_table_used",
                      "show_name": false,
                      "show_state": true,
                      "layout": "icon_state",
                      "state_display": "[[[ return entity.state + ' states']]]"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.pfsense_dhcp_leases_online",
                      "show_name": false,
                      "show_state": true,
                      "layout": "icon_state"
                    }
                  ]
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.pfsense_mb_in_within_1min"
                    },
                    {
                      "entity": "sensor.pfsense_mb_out_within_1min"
                    },
                    {
                      "entity": "sensor.home_assistant_mb_in_within_1min"
                    },
                    {
                      "entity": "sensor.home_assistant_mb_out_within_1min"
                    }
                  ],
                  "hours_to_show": 12
                },
                {
                  "type": "markdown",
                  "content": "## AdGuard"
                },
                {
                  "square": true,
                  "columns": 4,
                  "type": "grid",
                  "cards": [
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "entity": "switch.adguard_home_filtering",
                      "name": "DNS Filtering"
                    },
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "entity": "switch.adguard_home_safe_browsing",
                      "name": "Safe Browsing"
                    },
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "entity": "switch.adguard_home_safe_search",
                      "name": "Safe Search"
                    },
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "entity": "switch.adguard_home_parental_control",
                      "name": "Parental Controls"
                    }
                  ]
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.adguard_home_average_processing_speed"
                    }
                  ],
                  "hours_to_show": 12
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.dns_query_filter_block_rate_within_5min"
                    }
                  ],
                  "hours_to_show": 12
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.dns_queries_within_5min"
                    },
                    {
                      "entity": "sensor.dns_queries_blocked_by_filters_within_5min"
                    }
                  ],
                  "hours_to_show": 12
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "sensor.adguard_home_dns_queries",
                      "name": "DNS Queries"
                    },
                    {
                      "entity": "sensor.adguard_home_dns_queries_blocked",
                      "name": "Blocked by Filters"
                    },
                    {
                      "entity": "sensor.adguard_home_dns_queries_blocked_ratio",
                      "name": "% Blocked by Filters"
                    },
                    {
                      "entity": "sensor.adguard_home_safe_browsing_blocked",
                      "name": "Blocked by Safe Browsing"
                    },
                    {
                      "entity": "sensor.adguard_home_parental_control_blocked",
                      "name": "Blocked by Parental Controls"
                    },
                    {
                      "entity": "sensor.adguard_home_safe_searches_enforced",
                      "name": "Safe Searches Enforced"
                    }
                  ],
                  "title": "30-Day Stats"
                }
              ]
            }
          ]
        },
        {
          "theme": "no_border",
          "title": "Motion",
          "path": "motion",
          "icon": "mdi:motion-sensor",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "square_cell",
                      "icon": "mdi:bed",
                      "name": "Elena",
                      "show_name": true,
                      "tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": [
                            "automation.elenas_room_motion_ac",
                            "automation.elenas_room_motion_fan",
                            "automation.elenas_room_motion_lights",
                            "automation.elenas_room_motion_timeout"
                          ]
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": [
                            "automation.elenas_room_motion_ac",
                            "automation.elenas_room_motion_fan",
                            "automation.elenas_room_motion_lights",
                            "automation.elenas_room_motion_timeout"
                          ]
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elenas_room_motion_lights",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elenas_room_motion_fan",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elenas_room_motion_ac",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elenas_room_motion_timeout",
                      "template": "square_cell"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "square_cell",
                      "icon": "mdi:bed",
                      "name": "Eli",
                      "show_name": true,
                      "tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": [
                            "automation.elis_room_motion_ac",
                            "automation.elis_room_motion_fan",
                            "automation.elis_room_motion_lights",
                            "automation.elis_room_motion_timeout"
                          ]
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": [
                            "automation.elis_room_motion_ac",
                            "automation.elis_room_motion_fan",
                            "automation.elis_room_motion_lights",
                            "automation.elis_room_motion_timeout"
                          ]
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elis_room_motion_lights",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elis_room_motion_fan",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elis_room_motion_ac",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.elis_room_motion_timeout",
                      "template": "square_cell"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "square_cell",
                      "icon": "mdi:pasta",
                      "tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": [
                            "automation.dining_room_motion_ac",
                            "automation.dining_room_motion_fan",
                            "automation.dining_room_motion_lights",
                            "automation.dining_room_motion_pendant_light",
                            "automation.dining_room_motion_timeout"
                          ]
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": [
                            "automation.dining_room_motion_ac",
                            "automation.dining_room_motion_fan",
                            "automation.dining_room_motion_lights",
                            "automation.dining_room_motion_pendant_light",
                            "automation.dining_room_motion_timeout"
                          ]
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.dining_room_motion_lights",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.dining_room_motion_pendant_light",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.dining_room_motion_fan",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.dining_room_motion_ac",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.dining_room_motion_timeout",
                      "template": "square_cell"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "square_cell",
                      "icon": "mdi:sofa",
                      "tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": [
                            "automation.living_room_motion_ac",
                            "automation.living_room_motion_fan",
                            "automation.living_room_motion_lights",
                            "automation.living_room_motion_pendant_light",
                            "automation.living_room_motion_timeout"
                          ]
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": [
                            "automation.living_room_motion_ac",
                            "automation.living_room_motion_fan",
                            "automation.living_room_motion_lights",
                            "automation.living_room_motion_pendant_light",
                            "automation.living_room_motion_timeout"
                          ]
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.living_room_motion_lights",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.living_room_motion_pendant_light",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.living_room_motion_fan",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.living_room_motion_ac",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.living_room_motion_timeout",
                      "template": "square_cell"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "square_cell",
                      "icon": "mdi:bookshelf",
                      "tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": [
                            "automation.study_room_motion_ac",
                            "automation.study_room_motion_fan",
                            "automation.study_room_motion_lights",
                            "automation.study_room_motion_timeout"
                          ]
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": [
                            "automation.study_room_motion_ac",
                            "automation.study_room_motion_fan",
                            "automation.study_room_motion_lights",
                            "automation.study_room_motion_timeout"
                          ]
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.study_room_motion_lights",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.study_room_motion_fan",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.study_room_motion_ac",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.study_room_motion_timeout",
                      "template": "square_cell"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "template": "square_cell",
                      "icon": "mdi:bed",
                      "name": "D&G",
                      "show_name": true,
                      "tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_on",
                        "service_data": {
                          "entity_id": [
                            "automation.parents_room_motion_ac",
                            "automation.parents_room_motion_fan",
                            "automation.parents_room_motion_lights",
                            "automation.parents_room_motion_timeout"
                          ]
                        }
                      },
                      "double_tap_action": {
                        "action": "call-service",
                        "service": "automation.turn_off",
                        "service_data": {
                          "entity_id": [
                            "automation.parents_room_motion_ac",
                            "automation.parents_room_motion_fan",
                            "automation.parents_room_motion_lights",
                            "automation.parents_room_motion_timeout"
                          ]
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.parents_room_motion_lights",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "color_type": "blank-card"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.parents_room_motion_fan",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.parents_room_motion_ac",
                      "template": "square_cell"
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "automation.parents_room_motion_timeout",
                      "template": "square_cell"
                    }
                  ]
                }
              ]
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_number.motion_timeout_bedrooms",
                  "name": "Bedrooms"
                },
                {
                  "entity": "input_number.motion_timeout_walking_areas",
                  "name": "Walking Areas"
                },
                {
                  "entity": "input_number.motion_timeout_presence",
                  "name": "Presence"
                }
              ],
              "title": "Timeouts",
              "show_header_toggle": false
            }
          ]
        }
      ]
    }
  }
}